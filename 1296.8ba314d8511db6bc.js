"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1296],{1296:(E,Z,f)=>{f.r(Z),f.d(Z,{SettingsPage:()=>D});var o=f(5861),U=f(6895),v=f(433),c=f(7151),e=f(1571),T=f(2218);function C(p,_){1&p&&(e.TgZ(0,"ion-item")(1,"p"),e._uU(2," The Enhanced Unit Cost Rule is an optional rule that adds an additional cost to a unit's total cost based on the number of special rules it has. "),e._UZ(3,"br")(4,"br"),e._uU(5," The additional cost is calculated as ((number of special rules) - 3) * 10. This rule only applies to special rules with non-negative cost and only if the number of special rules with non-negative cost exceeds 3. "),e._UZ(6,"br")(7,"br"),e._uU(8," This rule is intended to provide a more balanced cost structure for units with many special rules, and to encourage players to choose a smaller number of high-impact special rules rather than many low-impact ones. "),e.qZA()())}let D=(()=>{class p{constructor(n,t){this.unitService=n,this.alertController=t,this.enhancedUnitCostRule=!1,this.appDeployment="6/13/2023, 7:02:03 PM (CST)",this.showEnhancedUnitCostDescription=!1}ngOnInit(){var n=this;return(0,o.Z)(function*(){n.enhancedUnitCostRule=yield n.unitService.getEnhancedUnitCostRule(),n.unitService.changes.subscribe((0,o.Z)(function*(){n.enhancedUnitCostRule=yield n.unitService.getEnhancedUnitCostRule()}))})()}ngOnDestroy(){var n=this;return(0,o.Z)(function*(){n.unitService.changes.unsubscribe()})()}onEnhancedUnitCostRuleToggleChange(n){var t=this;return(0,o.Z)(function*(){const i=n.detail.checked;yield t.unitService.setEnhancedUnitCostRule(i)})()}toggleEnhancedUnitCostDescription(n){"ION-TOGGLE"!==n.target.tagName&&(this.showEnhancedUnitCostDescription=!this.showEnhancedUnitCostDescription)}exportData(){var n=this;return(0,o.Z)(function*(){const t=n.unitService.exportData(),i=new Blob([t],{type:"text/plain;charset=utf-8"}),r=document.createElement("a");r.href=URL.createObjectURL(i),r.download="warstuff-backup.json",r.click()})()}importData(){var n=this;return(0,o.Z)(function*(){const t=document.createElement("input");t.type="file",t.addEventListener("change",function(){var i=(0,o.Z)(function*(r){var a;const u=null===(a=r.target.files)||void 0===a?void 0:a[0];if(u){const d=new FileReader;d.onload=function(){var h=(0,o.Z)(function*(g){var s,l;const m=null!==(s=null===(l=g.target)||void 0===l?void 0:l.result)&&void 0!==s?s:"";(yield n.unitService.importAndMergeData(m))?console.log("Data imported successfully"):console.error("Error importing data")});return function(g){return h.apply(this,arguments)}}(),d.readAsText(u)}});return function(r){return i.apply(this,arguments)}}()),t.click()})()}importUnits(){var n=this;return(0,o.Z)(function*(){const t=document.createElement("input");t.type="file",t.addEventListener("change",function(){var i=(0,o.Z)(function*(r){var a;const u=null===(a=r.target.files)||void 0===a?void 0:a[0];if(u){const d=new FileReader;d.onload=function(){var h=(0,o.Z)(function*(g){var s,l;const m=null!==(s=null===(l=g.target)||void 0===l?void 0:l.result)&&void 0!==s?s:"";(yield n.unitService.importAndMergeUnitsOnly(m))?console.log("Data imported successfully"):console.error("Error importing data")});return function(g){return h.apply(this,arguments)}}(),d.readAsText(u)}});return function(r){return i.apply(this,arguments)}}()),t.click()})()}importWarbands(){var n=this;return(0,o.Z)(function*(){const t=document.createElement("input");t.type="file",t.addEventListener("change",function(){var i=(0,o.Z)(function*(r){var a;const u=null===(a=r.target.files)||void 0===a?void 0:a[0];if(u){const d=new FileReader;d.onload=function(){var h=(0,o.Z)(function*(g){var s,l;const m=null!==(s=null===(l=g.target)||void 0===l?void 0:l.result)&&void 0!==s?s:"";(yield n.unitService.importAndMergeWarbandsOnly(m))?console.log("Data imported successfully"):console.error("Error importing data")});return function(g){return h.apply(this,arguments)}}(),d.readAsText(u)}});return function(r){return i.apply(this,arguments)}}()),t.click()})()}overwriteData(){var n=this;return(0,o.Z)(function*(){const t=document.createElement("input");t.type="file",t.addEventListener("change",function(){var i=(0,o.Z)(function*(r){var a;const u=null===(a=r.target.files)||void 0===a?void 0:a[0];if(u){const d=new FileReader;d.onload=function(){var h=(0,o.Z)(function*(g){var s,l;const m=null!==(s=null===(l=g.target)||void 0===l?void 0:l.result)&&void 0!==s?s:"";var S;yield(yield n.alertController.create({header:"Confirm Overwrite",message:"Are you sure you want to overwrite your data?",buttons:[{text:"Cancel",role:"cancel"},{text:"Overwrite",handler:(S=(0,o.Z)(function*(){(yield n.unitService.importAndOverwriteData(m))?console.log("Data imported successfully"):console.error("Error importing data")}),function(){return S.apply(this,arguments)})}]})).present()});return function(g){return h.apply(this,arguments)}}(),d.readAsText(u)}});return function(r){return i.apply(this,arguments)}}()),t.click()})()}deleteData(){var t,n=this;this.alertController.create({header:"Confirm Delete",message:"Are you sure you want to delete your data?",buttons:[{text:"Cancel",role:"cancel"},{text:"Delete",handler:(t=(0,o.Z)(function*(){yield n.unitService.clearUnits(),yield n.unitService.clearWarbands(),yield n.unitService.setEnhancedUnitCostRule(!1),console.log("Data deleted successfully")}),function(){return t.apply(this,arguments)})}]}).then(t=>t.present())}}return p.\u0275fac=function(n){return new(n||p)(e.Y36(T._),e.Y36(c.Br))},p.\u0275cmp=e.Xpm({type:p,selectors:[["app-settings"]],standalone:!0,features:[e.jDz],decls:28,vars:3,consts:[[3,"click"],["slot","end","aria-label","Toggle Enhanced Unit Cost Rule",3,"ngModel","ngModelChange","ionChange"],[4,"ngIf"],["expand","block",3,"click"],["expand","block","color","secondary",3,"click"],["expand","block","color","warning",3,"click"],["expand","block","color","danger",3,"click"]],template:function(n,t){1&n&&(e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e._uU(3,"Settings"),e.qZA()()(),e.TgZ(4,"ion-content")(5,"ion-item"),e._uU(6),e.qZA(),e.TgZ(7,"ion-item",0),e.NdJ("click",function(r){return t.toggleEnhancedUnitCostDescription(r)}),e.TgZ(8,"ion-label"),e._uU(9,"Enhanced Unit Cost Rule"),e.qZA(),e.TgZ(10,"ion-toggle",1),e.NdJ("ngModelChange",function(r){return t.enhancedUnitCostRule=r})("ionChange",function(r){return t.onEnhancedUnitCostRuleToggleChange(r)}),e.qZA()(),e.YNc(11,C,9,0,"ion-item",2),e.TgZ(12,"ion-list-header"),e._uU(13,"Data File Functions"),e.qZA(),e.TgZ(14,"ion-button",3),e.NdJ("click",function(){return t.exportData()}),e._uU(15,"Export To File"),e.qZA(),e.TgZ(16,"ion-button",3),e.NdJ("click",function(){return t.importData()}),e._uU(17,"Import And Merge All Data"),e.qZA(),e.TgZ(18,"ion-button",4),e.NdJ("click",function(){return t.importUnits()}),e._uU(19,"Import And Merge Units"),e.qZA(),e.TgZ(20,"ion-button",4),e.NdJ("click",function(){return t.importWarbands()}),e._uU(21,"Import And Merge Warbands"),e.qZA(),e.TgZ(22,"ion-list-header"),e._uU(23,"Dangerous Data Functions"),e.qZA(),e.TgZ(24,"ion-button",5),e.NdJ("click",function(){return t.overwriteData()}),e._uU(25,"Overwrite With File"),e.qZA(),e.TgZ(26,"ion-button",6),e.NdJ("click",function(){return t.deleteData()}),e._uU(27,"Delete All Data"),e.qZA()()),2&n&&(e.xp6(6),e.hij("App Deployment: ",t.appDeployment,""),e.xp6(4),e.Q6J("ngModel",t.enhancedUnitCostRule),e.xp6(1),e.Q6J("ngIf",t.showEnhancedUnitCostDescription))},dependencies:[c.Pc,c.YG,c.W2,c.Gu,c.Ie,c.Q$,c.yh,c.wd,c.ho,c.sr,c.w,U.ez,U.O5,v.u5,v.JJ,v.On],styles:["ion-button[_ngcontent-%COMP%]{display:flex;justify-content:center;max-width:calc(100% - 45px);margin:20px auto}"]}),p})()}}]);