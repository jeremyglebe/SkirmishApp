"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6186],{6186:(S,d,r)=>{r.r(d),r.d(d,{UnitCreationPage:()=>R});var o=r(7151),a=r(433);const p=[{name:"Armored",description:"Whenever this unit takes a hit roll one die, on a 4+ it is ignored (doesn\u2019t stack with cover terrain).",cost:15},{name:"Camouflaged",description:"This unit always counts as being in cover terrain.",cost:5},{name:"Tough I",description:"This model only rolls on the wounds table after accumulating 2 wounds and is only killed on a 7+.",cost:15},{name:"Tough II",description:"This model only rolls on the wounds table after accumulating 3 wounds and is only killed on an 8+.",cost:30},{name:"Fearless",description:"This unit may re-roll failed morale tests unless it is Stunned.",cost:10},{name:"Regeneration",description:"Whenever this unit would be killed roll one die, on a 4+ it is Stunned instead.",cost:20},{name:"Unwavering",description:"This unit is not routed by failed morale tests for losing half their army.",cost:5},{name:"Hit & Run",description:"When charging this unit may move back by 3\u201d after attacking, and enemies can\u2019t strike back.",cost:10},{name:"Intimidating",description:"Enemy units without this rule must take a morale test when in melee with it. If failed they must re-roll successful hits.",cost:10},{name:"Frenzy",description:"This unit may re-roll failed hit rolls in melee.",cost:5},{name:"Impact",description:"This unit gains one additional attack roll in melee when charging.",cost:5},{name:"Counter-Attack",description:"Enemies attacking this unit in melee that roll a 1 immediately take one hit themselves.",cost:5},{name:"Shooter I",description:'This unit may shoot with a range of 9".',cost:5},{name:"Shooter II",description:'This unit may shoot with a range of 18".',cost:10},{name:"Shooter III",description:'This unit may shoot with a range of 27".',cost:15},{name:"Deadly",description:"Whenever this unit rolls a 6 to hit it deals one automatic wound (can\u2019t be ignored by the armored rule).",cost:10},{name:"Fire/Poison",description:"When dealing wounds to an enemy add +1 to the wound roll.",cost:10},{name:"Freeze",description:"When dealing hits to an enemy roll one die, on a 4+ it may not move during its next activation.",cost:5},{name:"Powerful I",description:"This unit rolls 2 dice instead of 1 when attacking.",cost:10},{name:"Powerful II",description:"This unit rolls 3 dice instead of 1 when attacking.",cost:20},{name:"Indirect",description:"This unit may shoot through obstructions when any friendly unit has direct line of sight to the target (requires Shooter).",cost:5},{name:"Sniper",description:"When shooting, this unit ignores cover terrain effects (requires Shooter).",cost:5},{name:"Pinning",description:"Select a target and roll one die, on a 4+ the target and any units within 3\u201d each take a morale test. If failed, they must remain idle the next activation (requires Shooter).",cost:10},{name:"Leader",description:"When this unit is activated roll 3 dice, for each 4+ one friendly unit within 6\u201d may take one action.",cost:30},{name:"Death Blow",description:"If this unit is killed all units within 3\u201d take one automatic hit.",cost:5},{name:"Healer",description:"Whenever a friendly unit within 3\u201d would be killed roll one die, on a 4+ it is Stunned instead.",cost:10},{name:"Hero",description:'Friendly units within 12" of this unit may use its quality for morale tests unless it is Stunned.',cost:5},{name:"Large",description:"This unit may re-roll failed hits in melee against non-large units. Enemies may re-roll hits when shooting at it.",cost:0},{name:"Small",description:"This unit must re-roll hits in melee against non-small units. Enemies must re-roll hits when shooting at it.",cost:0},{name:"Fast",description:"This unit moves +2\u201d on advance and +4\u201d on rush/charge actions.",cost:5},{name:"Slow",description:"This unit moves -2\u201d on advance and -4\u201d on rush/charge actions.",cost:-5},{name:"Stealthy",description:"This unit is deployed after all non-stealthy units. Place it anywhere over 9\u201d away from enemy units, and if both players have stealthy units they must roll-off to see who deploys first.",cost:5},{name:"Strider",description:"This unit may move through difficult terrain as if it was open terrain.",cost:5},{name:"Flying",description:"This unit may move through units and obstacles, ignoring terrain effects.",cost:10},{name:"Aquatic",description:"This unit may move through water features as if it was open terrain.",cost:5},{name:"Wizard/Psychic",description:"This unit may cast one power at any time during its activation before attacking. Roll one die, on a 4+ apply one of these effects: \u2022 Fireball: Target enemy unit within 12\u201d takes one hit with Fire. \u2022 Ice Ray: Target enemy unit within 18\u201d takes one hit with Freeze.",cost:15}];var m=r(6895),h=r(3442),e=r(1571),g=r(2218);const f=["fileInput"];function _(n,l){if(1&n&&(e.TgZ(0,"ion-select-option",13),e._uU(1),e.qZA()),2&n){const t=l.$implicit;e.Q6J("value",t),e.xp6(1),e.AsE(" ",t.value,"+ (",t.cost,"pts) ")}}function y(n,l){if(1&n&&(e.TgZ(0,"div",20)(1,"p"),e._uU(2),e.qZA()()),2&n){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.description)}}function v(n,l){1&n&&e._UZ(0,"ion-icon",21)}const w=function(n){return{selected:n}};function T(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"ion-item")(1,"div",16),e.NdJ("click",function(){const c=e.CHM(t).$implicit,u=e.oxw(2);return e.KtG(u.toggleRuleExpansion(c))}),e.TgZ(2,"div"),e._uU(3),e.qZA(),e.YNc(4,y,3,1,"div",17),e.qZA(),e.TgZ(5,"div",18),e.NdJ("click",function(s){const u=e.CHM(t).$implicit;return e.oxw(2).toggleSpecialRule(u),e.KtG(s.stopPropagation())}),e.YNc(6,v,1,0,"ion-icon",19),e.qZA()()}if(2&n){const t=l.$implicit,i=e.oxw(2);e.xp6(3),e.AsE("",t.name," (",t.cost,"pts)"),e.xp6(1),e.Q6J("ngIf",i.expandedRules.includes(t.name)),e.xp6(1),e.Q6J("ngClass",e.VKq(5,w,i.specialRulesSelected.includes(t))),e.xp6(1),e.Q6J("ngIf",i.specialRulesSelected.includes(t))}}function C(n,l){if(1&n&&(e.TgZ(0,"div",14),e.YNc(1,T,7,7,"ion-item",15),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.specialRules)}}function x(n,l){if(1&n&&(e.TgZ(0,"ion-item")(1,"p"),e._uU(2),e.qZA()()),2&n){const t=e.oxw();e.xp6(2),e.AsE("",t.unitForm.value.name," will cost ",t.totalCost,"pts")}}function k(n,l){if(1&n&&(e.TgZ(0,"ion-item")(1,"p"),e._uU(2),e.qZA()()),2&n){const t=e.oxw();e.xp6(2),e.AsE("",t.unitForm.value.name,"'s number of special rules is ",t.unitForm.value.specialRules.length,"! The maximum is typically 3 by the standard rules. You can still create it, but it may not be allowed at some games.")}}let R=(()=>{class n{constructor(t,i){this.navCtrl=t,this.unitService=i,this.qualityOptions=[],this.specialRules=p,this.specialRulesSelected=[],this.expandedRules=[],this.showRules=!1;for(let s in h.C)this.qualityOptions.push({value:parseInt(s),cost:h.C[s]});this.unitForm=new a.cw({name:new a.NI("",a.kI.required),quality:new a.NI("",a.kI.required),specialRules:new a.NI([]),image:new a.NI("")})}get unit(){const t=this.unitForm.value;return{id:Math.random().toString(36).substring(2,9),name:t.name,quality:t.quality.value,specialRules:t.specialRules,image:t.image}}get totalCost(){return this.unitService.calcUnitCost(this.unit)}onSubmit(){console.log("Form submitted:",this.unitForm.value),this.unitService.addUnit(this.unit),this.navCtrl.navigateBack("/")}toggleRuleExpansion(t){this.expandedRules.includes(t.name)?this.expandedRules=this.expandedRules.filter(i=>i!==t.name):this.expandedRules.push(t.name)}toggleShowRules(){this.showRules=!this.showRules}toggleSpecialRule(t){this.specialRulesSelected.includes(t)?this.removeSpecialRule(t):this.addSpecialRule(t)}addSpecialRule(t){this.specialRulesSelected.includes(t)||(this.specialRulesSelected.push(t),this.unitForm.controls.specialRules.setValue(this.specialRulesSelected))}removeSpecialRule(t){this.specialRulesSelected=this.specialRulesSelected.filter(i=>i!==t),this.unitForm.controls.specialRules.setValue(this.specialRulesSelected)}onFileChange(t){const i=t.target.files[0];if(!i)return;const s=new FileReader;s.onload=()=>{this.unitForm.controls.image.setValue(s.result)},s.readAsDataURL(i)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(o.SH),e.Y36(g._))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-unit-creation"]],viewQuery:function(t,i){if(1&t&&e.Gf(f,5),2&t){let s;e.iGM(s=e.CRH())&&(i.fileInput=s.first)}},standalone:!0,features:[e.jDz],decls:28,vars:7,consts:[["slot","start"],[3,"formGroup","ngSubmit"],["formControlName","name","label","Unit Name"],["formControlName","quality","label","Quality"],[3,"value",4,"ngFor","ngForOf"],[3,"click"],["id","rules-list",4,"ngIf"],["formControlName","image","type","url","label","Image URL (optional)"],["slot","end",3,"click"],["type","file","hidden","","accept","image/*",3,"change"],["fileInput",""],[4,"ngIf"],["expand","block","type","submit",3,"disabled"],[3,"value"],["id","rules-list"],[4,"ngFor","ngForOf"],[2,"flex","1",3,"click"],["style","margin-left:20px",4,"ngIf"],["slot","end",1,"custom-checkbox",3,"ngClass","click"],["name","checkmark","style","color: white;",4,"ngIf"],[2,"margin-left","20px"],["name","checkmark",2,"color","white"]],template:function(t,i){if(1&t){const s=e.EpF();e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),e._UZ(3,"ion-back-button"),e.qZA(),e.TgZ(4,"ion-title"),e._uU(5,"Create Unit"),e.qZA()()(),e.TgZ(6,"ion-content")(7,"form",1),e.NdJ("ngSubmit",function(){return i.onSubmit()}),e.TgZ(8,"ion-list")(9,"ion-item"),e._UZ(10,"ion-input",2),e.qZA(),e.TgZ(11,"ion-item")(12,"ion-select",3),e.YNc(13,_,2,3,"ion-select-option",4),e.qZA()(),e.TgZ(14,"ion-item",5),e.NdJ("click",function(){return i.toggleShowRules()}),e.TgZ(15,"ion-label"),e._uU(16),e.qZA()(),e.YNc(17,C,2,1,"div",6),e.TgZ(18,"ion-item"),e._UZ(19,"ion-input",7),e.TgZ(20,"ion-button",8),e.NdJ("click",function(){e.CHM(s);const u=e.MAs(23);return e.KtG(u.click())}),e._uU(21,"Upload"),e.qZA(),e.TgZ(22,"input",9,10),e.NdJ("change",function(u){return i.onFileChange(u)}),e.qZA()(),e.YNc(24,x,3,2,"ion-item",11),e.YNc(25,k,3,2,"ion-item",11),e.qZA(),e.TgZ(26,"ion-button",12),e._uU(27,"Create Unit"),e.qZA()()()}2&t&&(e.xp6(7),e.Q6J("formGroup",i.unitForm),e.xp6(6),e.Q6J("ngForOf",i.qualityOptions),e.xp6(3),e.hij("Special Rules (click to ",i.showRules?"hide":"show",")"),e.xp6(1),e.Q6J("ngIf",i.showRules),e.xp6(7),e.Q6J("ngIf",i.unitForm.value.name&&i.totalCost),e.xp6(1),e.Q6J("ngIf",i.unitForm.value.specialRules.length>3),e.xp6(1),e.Q6J("disabled",i.unitForm.invalid))},dependencies:[o.Pc,o.oU,o.YG,o.Sm,o.W2,o.Gu,o.gu,o.pK,o.Ie,o.Q$,o.q_,o.t9,o.n0,o.wd,o.sr,o.QI,o.j9,o.cs,m.ez,m.mk,m.sg,m.O5,a.UX,a._Y,a.JJ,a.JL,a.sg,a.u],styles:["#rules-list[_ngcontent-%COMP%]{height:50vh;overflow-y:scroll;margin-left:40px}.custom-checkbox[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:30px;height:30px;border-radius:50%;background-color:#fff;border:2px solid var(--ion-color-primary);transition:background-color .3s}.custom-checkbox.selected[_ngcontent-%COMP%]{background-color:var(--ion-color-primary)}ion-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center}"]}),n})()}}]);