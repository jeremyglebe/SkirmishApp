"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7162],{7162:(P,d,s)=>{s.r(d),s.d(d,{SettingsPage:()=>C});var r=s(5861),m=s(6895),u=s(433),i=s(7151),e=s(1571),E=s(2218);let C=(()=>{class l{constructor(n){this.unitService=n,this.enhancedUnitCostRule=!1}ngOnInit(){var n=this;return(0,r.Z)(function*(){n.enhancedUnitCostRule=yield n.unitService.getEnhancedUnitCostRule(),n.unitService.changes.subscribe((0,r.Z)(function*(){n.enhancedUnitCostRule=yield n.unitService.getEnhancedUnitCostRule()}))})()}ngOnDestroy(){var n=this;return(0,r.Z)(function*(){n.unitService.changes.unsubscribe()})()}onEnhancedUnitCostRuleToggleChange(n){var t=this;return(0,r.Z)(function*(){const a=n.detail.checked;yield t.unitService.setEnhancedUnitCostRule(a)})()}exportData(){var n=this;return(0,r.Z)(function*(){const t=n.unitService.exportData(),a=new Blob([t],{type:"text/plain;charset=utf-8"}),o=document.createElement("a");o.href=URL.createObjectURL(a),o.download="warstuff-backup.json",o.click()})()}importData(){var n=this;return(0,r.Z)(function*(){const t=document.createElement("input");t.type="file",t.addEventListener("change",function(){var a=(0,r.Z)(function*(o){var c;const f=null===(c=o.target.files)||void 0===c?void 0:c[0];if(f){const p=new FileReader;p.onload=function(){var U=(0,r.Z)(function*(v){var _,g;const D=null!==(_=null===(g=v.target)||void 0===g?void 0:g.result)&&void 0!==_?_:"";(yield n.unitService.importData(D))?console.log("Data imported successfully"):console.error("Error importing data")});return function(v){return U.apply(this,arguments)}}(),p.readAsText(f)}});return function(o){return a.apply(this,arguments)}}()),t.click()})()}}return l.\u0275fac=function(n){return new(n||l)(e.Y36(E._))},l.\u0275cmp=e.Xpm({type:l,selectors:[["app-settings"]],standalone:!0,features:[e.jDz],decls:13,vars:1,consts:[["slot","end",3,"ngModel","ngModelChange","ionChange"],["expand","block",3,"click"]],template:function(n,t){1&n&&(e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e._uU(3,"Settings"),e.qZA()()(),e.TgZ(4,"ion-content")(5,"ion-item")(6,"ion-label"),e._uU(7,"Enhanced Unit Cost Rule"),e.qZA(),e.TgZ(8,"ion-toggle",0),e.NdJ("ngModelChange",function(o){return t.enhancedUnitCostRule=o})("ionChange",function(o){return t.onEnhancedUnitCostRuleToggleChange(o)}),e.qZA()(),e.TgZ(9,"ion-button",1),e.NdJ("click",function(){return t.exportData()}),e._uU(10,"Export Data"),e.qZA(),e.TgZ(11,"ion-button",1),e.NdJ("click",function(){return t.importData()}),e._uU(12,"Import Data"),e.qZA()()),2&n&&(e.xp6(8),e.Q6J("ngModel",t.enhancedUnitCostRule))},dependencies:[i.Pc,i.YG,i.W2,i.Gu,i.Ie,i.Q$,i.wd,i.ho,i.sr,i.w,m.ez,u.u5,u.JJ,u.On]}),l})()}}]);